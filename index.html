<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>AzintexNMP</title>

    <!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<!-- Custom style -->
	<link rel="stylesheet"  href="css/dashboard.css">
	<!-- FooTable -->
	<link rel="stylesheet" href="css/footable.bootstrap.min.css">
	<!-- Input mask -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.3.4/css/inputmask.css">


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
	
	<script charset="UTF-8" type="text/javascript">
		window["adrum-start-time"] = new Date().getTime();
	(function(config){
		config.appKey = "AD-AAB-ABJ-SZD";
		config.adrumExtUrlHttp = "http://cdn.appdynamics.com";
		config.adrumExtUrlHttps = "https://cdn.appdynamics.com";
		config.beaconUrlHttp = "http://pdx-col.eum-appdynamics.com";
		config.beaconUrlHttps = "https://pdx-col.eum-appdynamics.com";
		config.resTiming = {"bufSize":200,"clearResTimingOnBeaconSend":true};
		config.maxUrlLength = 512;
		})(window["adrum-config"] || (window["adrum-config"] = {}));
	</script>
<script src="//cdn.appdynamics.com/adrum/adrum-21.7.0.3493.js"></script>
  </head>
  <body>
	
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://85.132.64.10/ftbl/">AzintexNMP</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
			<li><a href="http://85.132.64.10/ftbl/accounting.html">Accounting</a></li>
            <li><a href="http://85.132.64.10/ftbl/pppoe.html">PPPoE</a></li>
            <li><a href="http://85.132.64.10/ftbl/ipoe.html">IPoE</a></li>
            <li><a href="#">Static</a></li>
            <li><a href="#">Locations</a></li>
			<li><a href="#">Inventory</a></li>
			<li><a href="#">Log</a></li>
			<li><a href="#">Logout</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12 col-md-12 main">
			<h1>Home</h1>
        </div>
      </div>
    </div>
		
	
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
	<!-- FooTable -->
	<script src="js/footable.min.js"></script>
	<!-- Input mask -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/3.3.4/jquery.inputmask.bundle.js"></script>
	<!-- Font Awesome -->
	<script src="https://use.fontawesome.com/359d0c40d1.js"></script>
	<script>
		var $modal = $('#editor-modal'),
		$editor = $('#editor'),
		$editorTitle = $('#editor-title'),
		ft = FooTable.init('#editbl', {
			filtering: {
				enabled: true,
				exactMatch: false,
				placeholder: "Search"
			},
			paging: {
				enabled: true,
				limit: 4
			},
			columns: $.get('columns.json'),
			rows: $.ajax({
				type: 'GET',
				dataType: 'json',
				url: 'http://85.132.64.10/api/get/users',
				cache: false,
				success: function(data){
					console.log('Success');
				},
				error: function(xhr, status, err){
					console.log(err);
				}
			}),
			editing: {
				enabled: true,
				addRow: function(){
					$modal.removeData('row');
					$editor[0].reset();
					$editorTitle.text('Add a new row');
					$modal.modal('show');
				},
				editRow: function(row){
					var values = row.val();
					$editor.find('#id').val(values.id);
					$editor.find('#company').val(values.company);
					$editor.find('#address').val(values.address);
					$editor.find('#person').val(values.person);
					$editor.find('#phone').val(values.phone);
					$editor.find('#email').val(values.email);
					$editor.find('#rate').val(values.rate);
					//$editor.find('#stop_date').val(values.stop_date);
					$editor.find('#state').val(values.state);

					$modal.data('row', row);
					$editorTitle.text('Edit row #' + values.id);
					$modal.modal('show');
				},
				deleteRow: function(row){
					var values = row.val();
					if (confirm('Are you sure you want to delete the row?')){
						row.delete();
						$.ajax({
							method: 'DELETE',
							url: "http://85.132.64.10/api/delete/" + values.id, 
							contentType: 'aplication/json',
							success: function(result){
								console.log('Client with id' + ' ' + values.id + 'Successfuly deleted');
							},
							error: function(request, msg, error){
								console.log(error);
							}
						})
					}
				}
			}
		}),
		uid = 10;

	$editor.on('submit', function(e){
		if (this.checkValidity && !this.checkValidity()) return;
		e.preventDefault();
		var row = $modal.data('row'),
			values = {
				id: $editor.find('#id').val(),
				company: $editor.find('#company').val(),
				address: $editor.find('#address').val(),
				person: $editor.find('#person').val(),
				phone: $editor.find('#phone').val(),
				email: $editor.find('#email').val(),
				rate: $editor.find('#rate').val(),
				stop_date: $editor.find('#stop_date').val(),
				state: $editor.find('#state').val()
			};

		if (row instanceof FooTable.Row){
			row.val(values);
		} else {
			values.id = uid++;
			ft.rows.add(values);
		}
		$modal.modal('hide');
	});
	//Inputmask({"mask": "(099)999-99-99"}).mask($('#phone'));
	//Inputmask("email").mask($('#email'));
	</script>
  </body>
</html>
